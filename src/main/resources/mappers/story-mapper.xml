<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="StoryNS">
	<resultMap id="storyRM" type="Story">
		<id property="story_num" column="story_num" />
		<result property="id" column="id" />
		<result property="story_img" column="story_img" />
		<result property="story_date" column="story_date" />
	</resultMap>

	<!-- <select id="storylist" resultType="Story"> 스토리 리스트 조회 select * from 
		story </select> -->

	<select id="storylist" resultMap="storyRM" parameterType="Story"> <!-- 스토리 리스트 조회 -->
		select * from story order by story_num DESC
	</select>

	<select id="storydetail" resultMap="storyRM" parameterType="Story"> <!-- 스토리 정보 가져오기 -->
		select * from story
		where story_num = #{story_num} 
	</select>

	<!-- 게시글 삽입 -->
	<insert id="insertStory" parameterType="String" flushCache="true" statementType="PREPARED">
		INSERT INTO story VALUES(story_seq.NEXTVAL,#{story_img},#{story_date},#{id})
	</insert>

	<delete id="deleteStory" parameterType="int">
		DELETE FROM story WHERE story_num = #{story_num }
	</delete>
</mapper>
